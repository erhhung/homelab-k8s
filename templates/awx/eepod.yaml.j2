# custom execution environment pod spec override
---
apiVersion: v1
kind: Pod
spec:
  containers:
    - name: worker
      resources:
        requests:
          cpu: 100m
          memory: 256Mi
      volumeMounts:
        - name: vaultpass
          # file is read by vaultpass.sh in projects to
          # decrypt the real per-project Vault password
          mountPath: /var/lib/awx/.vaultpass
          subPath: .vaultpass
  volumes:
    - name: vaultpass
      secret:
        secretName: {{ awx_secrets['secret'] }}
        items:
          - key: secret_key
            path: .vaultpass
        defaultMode: 416 # "0640"
